<!DOCTYPE html>
<html lang="es" itemscope itemtype="http://schema.org/Blog">
    <head>
        <!–– Made with Lockdown: https://github.com/fferegrino/lockdown ––>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c"></meta>

  <link rel="shortcut icon" href="">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <script src="https://kit.fontawesome.com/0271495296.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <script src="/js/main.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/vs.min.css" integrity="sha512-aWjgJTbdG4imzxTxistV5TVNffcYGtIQQm2NBNahV6LmX14Xq9WwZTL1wPjaSglUuVzYgwrq+0EuI4+vKvQHHw==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js" integrity="sha512-9GIHU4rPKUMvNOHFOer5Zm2zHnZOjayOO3lZpokhhCtgt8FNlNiW/bb7kl0R5ZXfCDVPcQ8S4oBdNs92p5Nm2w==" crossorigin="anonymous"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script data-ad-client="ca-pub-9566151416325480" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2176ff">
<meta name="msapplication-TileColor" content="#eeeef2">
<meta name="theme-color" content="#eeeef2">


  <title>Tips de desempeño en Xamarin Forms | That C# guy</title>

  <!-- Search Engine -->
  <meta name="description" content="Jason Smith, ingeniero a cargo de Xamarin Forms, hizo una fantástica presentación en la conferencia Evolve de este año. En ella, él repasó una larga lista de tips de desempeño, así como una sesión de preguntas y respuestas sobre Xamarin Forms.">
  <meta name="image" content="">
  <!-- Schema.org for Google -->
  <meta itemprop="name" content="Tips de desempeño en Xamarin Forms">
  <meta itemprop="description" content="Jason Smith, ingeniero a cargo de Xamarin Forms, hizo una fantástica presentación en la conferencia Evolve de este año. En ella, él repasó una larga lista de tips de desempeño, así como una sesión de preguntas y respuestas sobre Xamarin Forms.">
  <meta itemprop="image" content="">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Tips de desempeño en Xamarin Forms">
  <meta name="twitter:description" content="Jason Smith, ingeniero a cargo de Xamarin Forms, hizo una fantástica presentación en la conferencia Evolve de este año. En ella, él repasó una larga lista de tips de desempeño, así como una sesión de preguntas y respuestas sobre Xamarin Forms.">
  <meta name="twitter:site" content="@io_exception">
  <meta name="twitter:creator" content="@io_exception">
  <meta name="twitter:image" content="">
  <!-- Open Graph general (Facebook, Pinterest & Google+) -->
  <meta name="og:title" content="Tips de desempeño en Xamarin Forms">
  <meta name="og:description" content="Jason Smith, ingeniero a cargo de Xamarin Forms, hizo una fantástica presentación en la conferencia Evolve de este año. En ella, él repasó una larga lista de tips de desempeño, así como una sesión de preguntas y respuestas sobre Xamarin Forms.">
  <meta name="og:image" content="">
  <meta name="og:url" content="https://thatcsharpguy.com/">
  <meta name="og:site_name" content="That C# guy">
  <meta name="og:locale" content="es">
  <meta name="og:type" content="website">


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPXCSH21CP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-GPXCSH21CP');
</script>

        
    </head>
    <body style="position: relative; min-height: 100%; top: 0px;">
        <header class="site-header " role="banner">
  <div class="wrapper">
     <div class="site-header-inner">
       <span class="site-brand">
         <a class="site-brand-inner" rel="author" href="/">
          <!-- <img class="site-favicon" title="Your awesome title" src="" onerror="this.style.display='none'"> -->
          That C# guy
        </a>
      </span>
        <nav class="site-nav">
           <input type="checkbox" id="nav-trigger" class="nav-trigger">
           <label for="nav-trigger">
              <span class="menu-icon">
                 <svg viewbox="0 0 18 15" width="18px" height="15px">
                    <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
                 </svg>
              </span>
           </label>
           <div class="trigger">
             <!-- Header links -->
              <a class="page-link" target="_blank" href="https://www.youtube.com/thatcsharpguy/">YOUTUBE</a>
              <span class="page-link">
    <div id="google_translate_element" style="display: none;"></div>
    <span class="ct-language">
       <ul class="list-unstyled ct-language-dropdown">
         <li>
            <a href="#" class="lang-select" data-lang="es">
            <img src="https://www.countryflags.io/mx/flat/64.png" title="México">
            </a>
         </li>
          <li>
             <a href="#" class="lang-select" data-lang="en">
             <img src="https://www.countryflags.io/gb/flat/64.png" title="English">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="fr">
             <img src="https://www.countryflags.io/fr/flat/64.png" title="Franch">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="zh-CN">
             <img src="https://www.countryflags.io/cn/flat/64.png" title="Chinese(Simple)">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="ja">
             <img src="https://www.countryflags.io/jp/flat/64.png" title="Japan">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="ko">
             <img src="https://www.countryflags.io/kr/flat/64.png" title="Korean">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="ru">
             <img src="https://www.countryflags.io/ru/flat/64.png" title="Russia">
             </a>
          </li>
       </ul>
    </span>
    <script type="text/javascript">
       function googleTranslateElementInit() {
         new google.translate.TranslateElement({
           pageLanguage: '',
           autoDisplay: false,
           layout: google.translate.TranslateElement.InlineLayout.VERTICAL
         }, 'google_translate_element');
       
         function restoreLang() {
           var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
           if (!iframe) return;
       
           var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
           var restore_el = innerDoc.getElementsByTagName("button");
       
           for (var i = 0; i < restore_el.length; i++) {
             if (restore_el[i].id.indexOf("restore") >= 0) {
               restore_el[i].click();
               var close_el = innerDoc.getElementsByClassName("goog-close-link");
               close_el[0].click();
               return;
             }
           }
         }
       
         function triggerHtmlEvent(element, eventName) {
           var event;
           if (document.createEvent) {
             event = document.createEvent('HTMLEvents');
             event.initEvent(eventName, true, true);
             element.dispatchEvent(event);
           } else {
             event = document.createEventObject();
             event.eventType = eventName;
             element.fireEvent('on' + event.eventType, event);
           }
         }
       
         var googleCombo = document.querySelector("select.goog-te-combo");
         var langSelect = document.querySelector('.ct-language');
         langSelect.addEventListener('click', function(event) {
           if (!event.target) {
             return;
           }
       
           var selected = document.querySelector('.ct-language .ct-language-selected');
           if (selected) {
             selected.classList.remove('ct-language-selected');
           }
       
           var target = event.target;
           while (target && target !== langSelect ) {
             if (target.matches('.lang-select')) {
               break;
             }
             target = target.parentElement;
           }
       
           if (target && target.matches('.lang-select')) {
             var lang = target.getAttribute('data-lang');
             if (lang == "es") {
               restoreLang();
             } else {
               target.parentElement.classList.add('ct-language-selected');
               googleCombo.value = lang;
               triggerHtmlEvent(googleCombo, 'change');
             }
           }
       
           event.preventDefault();
         });
       }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
 </span>
           </div>
        </nav>
     </div>
  </div>
</header>
<script>
  (function() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;

      documentElement.setAttribute("data-header-transparent", "");

      var scrollStatus = "";
      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }
      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }
    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });
    storeScrollData();
  })();
</script>
        
        <div class="page-content">
            <div class="wrapper">
                <div class="framework">
                    <section class="main"> 
                        
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="post-content e-content" itemprop="articleBody">
        <h1>Tips de desempeño en Xamarin Forms</h1>
        
<p>Esta es la traducción de <a href="http://kent-boogaart.com/blog/jason-smith's-xamarin-forms-performance-tips" target="_blank">un post de Kent Boogaart</a> en donde recopiló una serie de tips sobre cómo mejorar el desempeño de apps hechas con Xamarin Forms.</p>
<hr />
<br />
<p>Jason Smith, ingeniero a cargo de Xamarin Forms, hizo una <a href="https://www.youtube.com/watch?v=RZvdql3Ev0E" target="_blank" rel="nofollow">fantástica presentación</a> en la conferencia Evolve de este año. En ella, él repasó una larga lista de tips de desempeño, así como una sesión de preguntas y respuestas. No he podido encontrar estos tips por escrito (en diapositivas, transcripción o post en blog). Con el interés de hacer esta información más fácilmente accesible para mi y otros, decidí resumirlos aquí.</p>
<p>Me tomé la libertad de reacomodar y agrupar tips relacionados, pero quiero dejar en claro que este es el contenido de Jason, no el mío.</p>
<h2 id="general">General</h2>
<p><strong>HABILITA</strong> la compilación de XAML si estás usándolo para tus vistas:</p>
<pre><code class="language-csharp">[assembly: XamlCompilation(XamlCompilationOptions.Compile)]
</code></pre>
<p><strong>NO USES</strong> <em>bindings</em> cuando asignaciones estáticas sean suficientes.</p>
<p><strong>NO</strong> asignes valores por default. Hacerlo conlleva un costo, aunque nunca modifiques el valor.</p>
<p><strong>EVITA</strong> usar transparencias. Busca lograr efectos similares con la opacidad al 100%.</p>
<p><strong>USA</strong> <code>async</code> / <code>await</code> para evitar bloquear el hilo principal.</p>
<p><strong>CONSIDERA</strong> crear los controles en un hilo distinto al principal, pero asegurate de agregarlos al <em>árbol visual</em> en el hilo principal. De no hacerlo no hará que tu app falle inmediatamente, pero corromperá su estado. Se especialmente cuidadoso si estás usando <code>MessagingCenter</code> en el constructor de tu control.</p>
<h2 id="layout">Layout</h2>
<p><strong>NO USES</strong> un <code>ContentView</code> con <code>Padding</code> solo para aplicarle un margen al hijo. Usa, en su lugar, la propiedad <code>Margin</code> en el hijo (disponible desde Xamarin.Forms 2.2).</p>
<p><strong>NO USES</strong> un <code>StackLayout</code> para contener un solo hijo.</p>
<p><strong>NO USES</strong> un <code>Grid</code> cuando con <code>StackLayout</code> basta.</p>
<p><strong>NO USES</strong> múltiples <code>StackLayout</code>s cuando con un <code>Grid</code> es suficiente.</p>
<p><strong>TOMA EN CUENTA</strong> las propiedades <code>Spacing</code> (<code>ColumnSpacing</code> / <code>RowSpacing</code> en <code>Grid</code>) y <code>Padding</code>. En lugar de esto:</p>
<pre><code class="language-xml">&lt;StackLayout&gt;
    &lt;ContentView Padding=&quot;10,10,10,5&quot;&gt;
        &lt;Label Text=&quot;1&quot;/&gt;
    &lt;/ContentView&gt;
    &lt;ContentView Padding=&quot;10,0,10,5&quot;&gt;
        &lt;Label Text=&quot;2&quot;/&gt;
    &lt;/ContentView&gt;
    &lt;ContentView Padding=&quot;10,0,10,0&quot;&gt;
        &lt;Label Text=&quot;3&quot;/&gt;
    &lt;/ContentView&gt;
&lt;/StackLayout&gt;
</code></pre>
<p>Haz esto:</p>
<pre><code class="language-xml">&lt;StackLayout Padding=&quot;10&quot; Spacing=&quot;5&quot;&gt;
    &lt;Label Text=&quot;1&quot;/&gt;
    &lt;Label Text=&quot;2&quot;/&gt;
    &lt;Label Text=&quot;3&quot;/&gt;
&lt;/StackLayout&gt;
</code></pre>
<p><strong>PREFIERE</strong> usar <code>LayoutOptions.Fill</code> (o <code>LayoutOptions.FillAndExpand</code>). Estos son los valores por default y la <em>mayoría</em> de las veces no deben ser modificados.</p>
<p><strong>PREFIERE</strong> filas/columnas de <code>Grid</code> con tamaño definido con <code>*</code> en lugar de <code>Auto</code>.</p>
<p><strong>NO USES</strong> múltiples <code>StackLayout</code>s para simular un <code>Grid</code>.</p>
<p><strong>NO USES</strong> <code>RelativeLayout</code> si es posible.</p>
<p><strong>AÑADE</strong> agrega los controles hijos a su contenedor padre antes de agregar el padre a la pantalla.</p>
<p>En lugar de esto:</p>
<pre><code class="language-csharp">var page = new ContentPage();
var stackLayout = new StackLayout();
var image = new Image { Source = &quot;person.png&quot; };
var label = new Label { Text = &quot;Name&quot; };

page.Content = stackLayout;

navigationPage.Push(page);
stackLayout.Children.Add(image);
stackLayout.Children.Add(label);
</code></pre>
<p>Haz esto:</p>
<pre><code class="language-csharp">var page = new ContentPage();
var stackLayout = new StackLayout();
var image = new Image { Source = &quot;person.png&quot; };
var label = new Label { Text = &quot;Name&quot; };

stackLayout.Children.Add(image);
stackLayout.Children.Add(label);
page.Content = stackLayout;

navigationPage.Push(page);
</code></pre>
<p>XAML ya agrega los controles en el orden <em>correcto</em>.</p>
<p><strong>AÑADE</strong> los controles a la página en el constructor en lugar de en el método <code>OnAppearing</code>.</p>
<p><strong>PREFIERE</strong> animar los controles usando las propiedades <code>TranslationX</code> y <code>TranslatonY</code>.</p>
<p><strong>NO</strong> llames al método <code>Layout()</code> (y especialmente <code>ForceLayout()</code>).</p>
<p><strong>CONSIDERA</strong> crear un <em>custom layout</em>. Es la mejor opción si es fácil describir el orden de tus controles con palabras pero difícil de implementarlo con los <em>layouts</em> que vienen en forms, si <code>AbsoluteLayout</code> hace <em>casi</em> lo que te gusta, o si simplemente necesitas velocidad pura.</p>
<p><strong>NO USES</strong> un <code>StackLayout</code> dentro de un <code>ScrollView</code> para simular un <code>ListView</code>.</p>
<p><strong>USA</strong> un <code>Grids</code> para hacer ordenamiento por capas.</p>
<h2 id="labels">Labels</h2>
<p><strong>NO USES</strong> múltiples <code>Label</code>s cuando con una (usando <em>spans</em> con <code>FormattedText</code> cuando es necesario) basta.</p>
<p><strong>DESACTIVA</strong> <code>Label</code> <em>wrapping</em> si es posible (<code>LineBreakMode=&quot;NoWrap&quot;</code>).</p>
<p><strong>NO</strong> cambies el valor de <code>VerticalTextAlignment</code> a menos que sea necesario. El valor por default elimina un ciclo de medición completo.</p>
<p><strong>PREFIERE</strong> las propiedades <code>VerticalTextAlignment</code> y <code>HorizontalTextAlignment</code> sobre <code>VerticalOptions</code> y <code>HorizontalOptions</code>.</p>
<p><strong>EVITA</strong> actualizaciones esporádicas a <code>Label</code>s. Si las actualizaciones son a múltiples <code>Label</code>s, agrupa las actualizaciones de ser posible.</p>
<h2 id="listviews">ListViews</h2>
<p><strong>NO</strong> pongas un <code>ListView</code> dentro de un <code>ScrollView</code>. Usa las propiedades <code>Header</code> y <code>Footer</code> en su lugar.</p>
<p><strong>NO USES</strong> <code>TableView</code> donde puedas usar <code>ListView</code>. Hoy en día, la única razón real para usar un <code>TableView</code> es por interfaces del estilo de un panel de configuración en el que cada celda tiene un contenido único.</p>
<p><strong>USA</strong> <code>ListViewCachingStrategy.RecycleElement</code> cuando puedas. Si no te funciona, revisa por qué no lo hace, realmente vale la pena. Debes activar esta propiedad manualmente.</p>
<p><strong>USA</strong> los selectores de <em>data template</em> para facilitar el uso de distintos controles dentro de un solo <code>ListView</code>. No sobreescribas <code>OnBindingContextChanged</code> para obtener el mismo efecto.</p>
<p><strong>EVITA</strong> usar <code>IEnumerable&lt;T&gt;</code> como origen de datos para un <code>ListView</code>, en su lugar, intenta usar <code>IList&lt;T&gt;</code>.</p>
<p><strong>NO</strong> anides <code>ListView</code>s, en su lugar utiliza grupos dentro de uno. No hay soporte para anidamiento de <code>ListViews</code> y hará que tu aplicación falle.</p>
<p><strong>USA</strong> la propiedad <code>HasUnevenRows</code> cuando tu <code>ListView</code> tenga filas de distintos tamaños. Si el contenido de una celda es modificado dinámicamente (tal vez despuésde cargar información de la base de datos), asegúrate de llamar <code>ForceUpdateSize()</code> en la celda.</p>
<h2 id="navegacion">Navegación</h2>
<p><strong>USA</strong> <code>await</code> cuando ejecutes <code>PushAsync</code> y <code>PopAsync</code>. El no hacerlo reduce el desempeño y la <em>correctitud</em> de tu aplicación.</p>
<p><strong>EVITA</strong> ocultar / mostrar la barra de navegación.</p>
<p><strong>USA</strong> el <a href="https://gist.github.com/jassmith/a3b2a543f99126782936" target="_blank" rel="nofollow">soporte para AppCompat</a> para Android. Esto mejorará el desempeño y apariencia de la aplicación.</p>
<h2 id="imagenes">Imágenes</h2>
<p><strong>TOMA EN CUENTA</strong> que Android no se optimiza el tamaño de la imagen.</p>
<p><strong>ASIGNA</strong> <code>true</code> a <code>Image.IsOpaque</code> si es posible.</p>
<p><strong>CARGA</strong> imagenes desde <em>Content</em> en lugar de <em>Recursos</em>.</p>
<h2 id="bindableproperty">BindableProperty</h2>
<p><strong>NO USES</strong> la versión genérica de <code>BindableProperty.Create</code> (usa la versión basada en <code>string</code> en conjunto con el operador <code>nameof</code>).</p>
<h2 id="carouselpage">CarouselPage</h2>
<p><strong>NO USES</strong> la <code>CarouselPage</code></p>
<p><strong>USA</strong> un <code>ContentView</code> dentro de una `ContentPage</p>
<h2 id="messagingcenter">MessagingCenter</h2>
<p><strong>PREFIERE</strong> usar otro framework (como Prism).</p>
<p><strong>USA</strong> un método estático o de instancia en lugar de una expresión lambda para el <code>MessagingCenter</code>.</p>


    </div>
</article>

                    </section>
                    <section class="sidebar">
                        <div class="theme-toggle">
  <input type="checkbox" id="theme-switch"/>
  <label for="theme-switch">
      <div class="toggle"></div>
      <div class="names">
          <p class="light">Light</p>
          <p class="dark">Dark</p>
      </div>
  </label>
</div>
  


<script>
    (function() {
      var sw = document.getElementById('theme-switch');
      var html = document.getElementsByTagName('html')[0];
      var nightModeOption = ('auto' || 'auto').toLowerCase();
      var storage = nightModeOption === 'manual'
          ? localStorage
          : sessionStorage;
      var themeData = loadThemeData();
  
      function saveThemeData(data) {
        storage.setItem('theme', JSON.stringify(data));
      }
  
      function loadThemeData() {
        var data = storage.getItem('theme');
        try {
          data = JSON.parse(data ? data : '');
        } catch(e) {
          data = { nightShift: undefined, autoToggleAt: 0 };
          saveThemeData(data);
        }
        return data;
      }
  
      function handleThemeToggle(nightShift) {
        themeData.nightShift = nightShift;
        saveThemeData(themeData);
        html.dataset.theme = nightShift ? 'dark' : 'light';
        setTimeout(function() {
          sw.checked = nightShift ? true : false;
        }, 50);
      }
  
      function autoThemeToggle() {
        // Next time point of theme toggle
        var now = new Date();
        var toggleAt = new Date();
        var hours = now.getHours();
        var nightShift = hours >= 19 || hours <=7;
  
        if (nightShift) {
          if (hours > 7) {
            toggleAt.setDate(toggleAt.getDate() + 1);
          }
          toggleAt.setHours(7);
        } else {
          toggleAt.setHours(19);
        }
  
        toggleAt.setMinutes(0);
        toggleAt.setSeconds(0);
        toggleAt.setMilliseconds(0)
  
        var delay = toggleAt.getTime() - now.getTime();
  
        // auto toggle theme mode
        setTimeout(function() {
          handleThemeToggle(!nightShift);
        }, delay);
  
        return {
          nightShift: nightShift,
          toggleAt: toggleAt.getTime()
        };
      }
  
      // Listen the theme toggle event
      sw.addEventListener('change', function(event) {
        handleThemeToggle(event.target.checked);
      });
  
      if (nightModeOption == 'auto') {
        var data = autoThemeToggle();
  
        // Toggle theme by local setting
        if (data.toggleAt > themeData.autoToggleAt) {
          themeData.autoToggleAt = data.toggleAt;
          handleThemeToggle(data.nightShift);
        } else {
          handleThemeToggle(themeData.nightShift);
        }
      } else if (nightModeOption == 'manual') {
        handleThemeToggle(themeData.nightShift);
      } else {
        var nightShift = themeData.nightShift;
        if (nightShift === undefined) {
          nightShift = nightModeOption === 'on';
        }
        handleThemeToggle(nightShift);
      }
    })();
  </script>
                        <div class="post-menu">
                            <div class="post-menu-title">Sígueme en</div>
                            <div class="common-list">
                                <ul>
                                    
                                    <li>
                                        <a href="https://github.com/fferegrino">GitHub<span><i class="fab fa-github"></i></span></a>
                                    </li>
                                    
                                    <li>
                                        <a href="https://twitter.com/io_exception">Twitter<span><i class="fab fa-twitter"></i></span></a>
                                    </li>
                                    
                                    <li>
                                        <a href="https://youtube.com/thatcsharpguy">YouTube<span><i class="fab fa-youtube"></i></span></a>
                                    </li>
                                    
                                    <li>
                                        <a href="https://tcsg.dev/discord">Discord<span><i class="fab fa-discord"></i></span></a>
                                    </li>
                                    
                                </ul>
                            </div>
                        </div>
                        
 <style type="text/css" media="screen">
    .post-menu ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
</style>
<div class="post-menu toc">
    <div class="post-menu-title">TOC</div>
    <div class="post-menu-content"></div>
</div>
<script>
    function generateContent() {
        var menu = document.querySelector(".post-menu.toc");
        console.log(menu);
        var menuContent = menu.querySelector(".post-menu-content");
        var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");
        // Hide menu when no headings
        if (headings.length === 0) {
            return menu.style.display = "none";
        }
        // Generate post menu
        var menuHTML = '';
        for (var i = 0; i < headings.length; i++) {
            var h = headings[i];
            menuHTML += ('<li class="h-' + h.tagName.toLowerCase() + '">' + '<a href="#' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
        }
        menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';
        // The header element
        var header = document.querySelector('header.site-header');
        function doMenuCollapse(index, over_items) {
            var items = menuContent.firstChild.children;
            if (over_items == undefined) {
                over_items = 20;
            }
            if (items.length<over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0 && ! items[beginIndex].classList.contains('h-h2')) {
                beginIndex -= 1;
            }
            while (endIndex < items.length && ! items[endIndex].classList.contains('h-h2')) {
                endIndex += 1;
            }
            for (var i = 0; i < beginIndex; i++) {
                item = items[i]
                if (!item.classList.contains('h-h2')) {
                    item.style.display = 'none';
                }
            }
            for (var i = beginIndex + 1; i < endIndex; i++) {
                item = items[i]
                // if (!item.classList.contains('h-h2')) {
                item.style.display = '';
                // }
            }
            for (var i = endIndex; i < items.length; i++) {
                item = items[i]
                if (!item.classList.contains('h-h2')) {
                    item.style.display = 'none';
                }
            }
        }
        // Init menu collapsed
        doMenuCollapse(-1);
        // Active the menu item
        window.addEventListener('scroll', function (event) {
            var lastActive = menuContent.querySelector('.active');
            var changed = true;
            var activeIndex = -1;
            for (var i = headings.length - 1; i >= 0; i--) {
                var h = headings[i];
                var headingRect = h.getBoundingClientRect();
                var headerRect = header.getBoundingClientRect();
                var headerTop = Math.floor(headerRect.top);
                var headerHeight = Math.floor(headerRect.height);
                var headerHeight = headerTop + headerHeight + 20;
                if (headingRect.top <= headerHeight) {
                    var id = 'h-' + h.getAttribute('id');
                    var a = menuContent.querySelector('a[href="#' + id + '"]');
                    var curActive = a.parentNode;
                    if (curActive) {
                        curActive.classList.add('active');
                        activeIndex = i;
                    }
                    if (lastActive == curActive) {
                        changed = false;
                    }
                    break;
                }
            }
            if (changed) {
                if (lastActive) {
                    lastActive.classList.remove('active');
                }
                doMenuCollapse(activeIndex);
            }
            event.preventDefault();
        });
    }
    document.addEventListener("DOMContentLoaded", function() {
        generateContent()
    });
</script>

                    </section>
                </div>
            </div>
        </div>
        <footer class="site-footer h-card">
   <data class="u-url" href="/"></data>
 
   <div class="wrapper">
     <div class="site-footer-inner">
       <div> </div>
       <div>Powered by <a title="Lockdonw in a simple, blog-aware, static site generator." href="https://github.com/lockdownblog/lockdown">Lockdown</a> &amp; <a title="Yat, yetanother theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
       <!-- <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a></div> -->
     </div>
   </div>
 </footer>
    </body>
</html>