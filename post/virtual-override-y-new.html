<!DOCTYPE html>
<html lang="es"  itemscope itemtype="http://schema.org/Blog">
<head>
        <!–– Made with Lockdown: https://github.com/fferegrino/lockdown ––>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c"></meta>

  <link rel="shortcut icon" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <script src="/js/main.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/vs.min.css" integrity="sha512-aWjgJTbdG4imzxTxistV5TVNffcYGtIQQm2NBNahV6LmX14Xq9WwZTL1wPjaSglUuVzYgwrq+0EuI4+vKvQHHw==" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js" integrity="sha512-9GIHU4rPKUMvNOHFOer5Zm2zHnZOjayOO3lZpokhhCtgt8FNlNiW/bb7kl0R5ZXfCDVPcQ8S4oBdNs92p5Nm2w==" crossorigin="anonymous"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script data-ad-client="ca-pub-9566151416325480" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2176ff">
<meta name="msapplication-TileColor" content="#eeeef2">
<meta name="theme-color" content="#eeeef2">


<title>virtual, override y new | That C# guy</title>

<!-- Search Engine -->
<meta name="description" content="Las palabras new, virtual y override nos ayudan a especificar el comportamiento de los miembros de clases y sus subclases.">
<meta name="image" content="">
<!-- Schema.org for Google -->
<meta itemprop="name" content="virtual, override y new">
<meta itemprop="description" content="Las palabras new, virtual y override nos ayudan a especificar el comportamiento de los miembros de clases y sus subclases.">
<meta itemprop="image" content="">
<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="virtual, override y new">
<meta name="twitter:description" content="Las palabras new, virtual y override nos ayudan a especificar el comportamiento de los miembros de clases y sus subclases.">
<meta name="twitter:site" content="@io_exception">
<meta name="twitter:creator" content="@io_exception">
<meta name="twitter:image" content="">
<!-- Open Graph general (Facebook, Pinterest & Google+) -->
<meta name="og:title" content="virtual, override y new">
<meta name="og:description" content="Las palabras new, virtual y override nos ayudan a especificar el comportamiento de los miembros de clases y sus subclases.">
<meta name="og:image" content="">
<meta name="og:url" content="https://thatcsharpguy.com/">
<meta name="og:site_name" content="That C# guy">
<meta name="og:locale" content="es">
<meta name="og:type" content="website">


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GPXCSH21CP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GPXCSH21CP');
</script>

        
</head>

<body style="position: relative; min-height: 100%; top: 0px;">  
        <header class="site-header " role="banner">
  <div class="wrapper">
     <div class="site-header-inner">
       <span class="site-brand">
         <a class="site-brand-inner" rel="author" href="/">
          <!-- <img class="site-favicon" title="Your awesome title" src="" onerror="this.style.display='none'"> -->
          That C# guy
        </a>
      </span>
        <nav class="site-nav">
           <input type="checkbox" id="nav-trigger" class="nav-trigger">
           <label for="nav-trigger">
              <span class="menu-icon">
                 <svg viewbox="0 0 18 15" width="18px" height="15px">
                    <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
                 </svg>
              </span>
           </label>
           <div class="trigger">
             <!-- Header links -->
              <a class="page-link" target="_blank" href="https://www.youtube.com/thatcsharpguy/">YOUTUBE</a>
              <span class="page-link">
    <div id="google_translate_element" style="display: none;"></div>
    <span class="ct-language">
       <ul class="list-unstyled ct-language-dropdown">
         <li>
            <a href="#" class="lang-select" data-lang="es">
            <img src="https://www.countryflags.io/mx/flat/64.png" title="México">
            </a>
         </li>
          <li>
             <a href="#" class="lang-select" data-lang="en">
             <img src="https://www.countryflags.io/gb/flat/64.png" title="English">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="fr">
             <img src="https://www.countryflags.io/fr/flat/64.png" title="Franch">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="zh-CN">
             <img src="https://www.countryflags.io/cn/flat/64.png" title="Chinese(Simple)">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="ja">
             <img src="https://www.countryflags.io/jp/flat/64.png" title="Japan">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="ko">
             <img src="https://www.countryflags.io/kr/flat/64.png" title="Korean">
             </a>
          </li>
          <li>
             <a href="#" class="lang-select" data-lang="ru">
             <img src="https://www.countryflags.io/ru/flat/64.png" title="Russia">
             </a>
          </li>
       </ul>
    </span>
    <script type="text/javascript">
       function googleTranslateElementInit() {
         new google.translate.TranslateElement({
           pageLanguage: '',
           autoDisplay: false,
           layout: google.translate.TranslateElement.InlineLayout.VERTICAL
         }, 'google_translate_element');
       
         function restoreLang() {
           var iframe = document.getElementsByClassName('goog-te-banner-frame')[0];
           if (!iframe) return;
       
           var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
           var restore_el = innerDoc.getElementsByTagName("button");
       
           for (var i = 0; i < restore_el.length; i++) {
             if (restore_el[i].id.indexOf("restore") >= 0) {
               restore_el[i].click();
               var close_el = innerDoc.getElementsByClassName("goog-close-link");
               close_el[0].click();
               return;
             }
           }
         }
       
         function triggerHtmlEvent(element, eventName) {
           var event;
           if (document.createEvent) {
             event = document.createEvent('HTMLEvents');
             event.initEvent(eventName, true, true);
             element.dispatchEvent(event);
           } else {
             event = document.createEventObject();
             event.eventType = eventName;
             element.fireEvent('on' + event.eventType, event);
           }
         }
       
         var googleCombo = document.querySelector("select.goog-te-combo");
         var langSelect = document.querySelector('.ct-language');
         langSelect.addEventListener('click', function(event) {
           if (!event.target) {
             return;
           }
       
           var selected = document.querySelector('.ct-language .ct-language-selected');
           if (selected) {
             selected.classList.remove('ct-language-selected');
           }
       
           var target = event.target;
           while (target && target !== langSelect ) {
             if (target.matches('.lang-select')) {
               break;
             }
             target = target.parentElement;
           }
       
           if (target && target.matches('.lang-select')) {
             var lang = target.getAttribute('data-lang');
             if (lang == "es") {
               restoreLang();
             } else {
               target.parentElement.classList.add('ct-language-selected');
               googleCombo.value = lang;
               triggerHtmlEvent(googleCombo, 'change');
             }
           }
       
           event.preventDefault();
         });
       }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
 </span>
           </div>
        </nav>
     </div>
  </div>
</header>
<script>
  (function() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;

      documentElement.setAttribute("data-header-transparent", "");

      var scrollStatus = "";
      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }
      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }
    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });
    storeScrollData();
  })();
</script>
          
        

        <div class="theme-toggle">
    <input type="checkbox" id="theme-switch">
    <label for="theme-switch">
      <div class="toggle"></div>
      <div class="names">
        <p class="light">Light</p>
        <p class="dark">Dark</p>
      </div>
    </label>
  </div>
  
  
  <script>
    (function() {
      var sw = document.getElementById('theme-switch');
      var html = document.getElementsByTagName('html')[0];
      var nightModeOption = ('auto' || 'auto').toLowerCase();
      var storage = nightModeOption === 'manual'
          ? localStorage
          : sessionStorage;
      var themeData = loadThemeData();
  
      function saveThemeData(data) {
        storage.setItem('theme', JSON.stringify(data));
      }
  
      function loadThemeData() {
        var data = storage.getItem('theme');
        try {
          data = JSON.parse(data ? data : '');
        } catch(e) {
          data = { nightShift: undefined, autoToggleAt: 0 };
          saveThemeData(data);
        }
        return data;
      }
  
      function handleThemeToggle(nightShift) {
        themeData.nightShift = nightShift;
        saveThemeData(themeData);
        html.dataset.theme = nightShift ? 'dark' : 'light';
        setTimeout(function() {
          sw.checked = nightShift ? true : false;
        }, 50);
      }
  
      function autoThemeToggle() {
        // Next time point of theme toggle
        var now = new Date();
        var toggleAt = new Date();
        var hours = now.getHours();
        var nightShift = hours >= 19 || hours <=7;
  
        if (nightShift) {
          if (hours > 7) {
            toggleAt.setDate(toggleAt.getDate() + 1);
          }
          toggleAt.setHours(7);
        } else {
          toggleAt.setHours(19);
        }
  
        toggleAt.setMinutes(0);
        toggleAt.setSeconds(0);
        toggleAt.setMilliseconds(0)
  
        var delay = toggleAt.getTime() - now.getTime();
  
        // auto toggle theme mode
        setTimeout(function() {
          handleThemeToggle(!nightShift);
        }, delay);
  
        return {
          nightShift: nightShift,
          toggleAt: toggleAt.getTime()
        };
      }
  
      // Listen the theme toggle event
      sw.addEventListener('change', function(event) {
        handleThemeToggle(event.target.checked);
      });
  
      if (nightModeOption == 'auto') {
        var data = autoThemeToggle();
  
        // Toggle theme by local setting
        if (data.toggleAt > themeData.autoToggleAt) {
          themeData.autoToggleAt = data.toggleAt;
          handleThemeToggle(data.nightShift);
        } else {
          handleThemeToggle(themeData.nightShift);
        }
      } else if (nightModeOption == 'manual') {
        handleThemeToggle(themeData.nightShift);
      } else {
        var nightShift = themeData.nightShift;
        if (nightShift === undefined) {
          nightShift = nightModeOption === 'on';
        }
        handleThemeToggle(nightShift);
      }
    })();
  </script>

        <div class="page-content">
            <div class="wrapper">
                <div class="framework">
                    <section class="main">
                
<h1>virtual, override y new</h1>

<p>Comencemos hablando de perritos, o de <em>Canis lupus familiaris</em> para ser más exactos.</p>
<p>Toma, por ejemplo, la clase <code>CanisLupusFamiliaris</code> (perro doméstico), que tiene dos métodos, nota que uno está marcado como <code>virtual</code> y otro no.</p>
<pre><code class="language-csharp">public class CanisLupusFamiliaris // Perro doméstico
{
    public virtual void Ladrar()
    {
        Console.WriteLine(&quot;Ladrido genéico&quot;);
    }

    public void MoverOrejas()
    {
        Console.WriteLine(&quot;Error: sin información&quot;);
    }
}
</code></pre>
<p>Y una clase derivada, llamada <code>Chihuahua</code>, que como sabrás, es un perro doméstico. El Chihuahua, al ser algo más específico tiene su propia manera de ladrar y mover las orejas, define sus propios métodos:</p>
<pre><code class="language-csharp">public class Chihuahua : CanisLupusFamiliaris
{
    public void Ladrar()
    {
        Console.WriteLine(&quot;Bau, bau&quot;);
    }

    public void MoverOrejas()
    {
        Console.WriteLine(&quot;Mueve sus orejas peludas&quot;);
    }
}
</code></pre>
<h3><code>new</code>, <code>override</code></h3>
<p>Sin embargo, el <code>Chihuahua</code> no es el único perro, también tenemos un <code>GranDanes</code>, que nuevamente, es un perro doméstico y hereda de <code>CanisLupusFamiliaris</code>. Pero, a diferencia de la clase anterior, esta implementa su forma de ladrar y de mover la cola de manera distinta:</p>
<pre><code class="language-csharp">public class GranDanes : CanisLupusFamiliaris
{
    public override void Ladrar()
    {
        Console.WriteLine(&quot;Woof, woof&quot;);
    }

    public new void MoverOrejas()
    {
        Console.WriteLine(&quot;Mueve sus orejas gigantezcas&quot;);
    }
}
</code></pre>
<p>Si te das cuenta, aparecieron dos palabras en la definición de los métodos: <code>new</code> y <code>override</code></p>
<p>La explicación de estas palabras es la siguiente:</p>
<h2><code>override</code></h2>
<p><strong>El modificador <code>override</code> se usa para indicar que el método que se está definiendo modificará el comportamiento del definido en la clase base.</strong> Para que un miembro pueda ser sobrescrito debe estar marcado con el modificador <code>virtual</code>. La clase <code>GranDanes</code> está sobrescribiendo el método virtual <code>Ladrar</code>. Entonces no importa desde donde llamemos a este método, siempre llamaremos a la implementación de esta clase.</p>
<p>Si compilas el código anterior aparecerán unas advertencias en tu IDE, indicándote que en la clase <code>Chihuahua</code> el método <code>Ladrar</code> esconde al método del mismo nombre en la clase <code>CanisLupusFamiliaris</code>, sin embargo, al estar marcado como virtual también nos da la opción de marcarlo con <code>override</code>:</p>
<img src="https://thatcsharpguy.github.io/postimages/aprende-c-sharp/new/overrideWarning.jpg" title="Hiding member" />
<p>Como la clase <code>GranDanes</code> sí está sobrescribiendo el archivo, estas advertencias no aparecen.</p>
<h2><code>new</code></h2>
<p>En este ámbito (antes de la definición de un método o propiedad de una clase) nos ayuda a especificar que la definición de nuestro método está <em>ocultando</em> una definición similar en la clase padre. En el caso de <code>GranDanes</code>, el método <code>MoverOrejas</code> está escondiendo la definición de la clase padre. <strong>En realidad la palabra <code>new</code> no es más que una indicación para el compilador de que estás conciente de que estás escondiendo una definición</strong> ya existente, no tiene otro efecto en tu programa.</p>
<p>Si compilas el código anterior aparecerán unas advertencias en tu IDE, indicándote que en la clase <code>Chihuahua</code> el método <code>MoverOrejas</code> esconde al método del mismo nombre en la clase <code>CanisLupusFamiliaris</code>:</p>
<img src="https://thatcsharpguy.github.io/postimages/aprende-c-sharp/new/newWarning.jpg" title="Hiding member" />
<p>Esta advertencia no aparece en la clase <code>GranDanes</code>.</p>
<h2>Ejemplo:</h2>
<p>Considera el siguiente programa, en donde declaramos un perro de la clase base y llamamos a sus métodos, nada raro, todo funciona como debería funcionar:</p>
  <div class="wrapper pure-g">
      <div class="pure-u-1 pure-u-md-14-24">
```csharp  
CanisLupusFamiliaris canis = new CanisLupusFamiliaris();
Console.WriteLine("Canis genérico:");
canis.Ladrar();
canis.MoverOrejas();
```  
      </div>
      <div class="pure-u-1 pure-u-md-10-24">
<pre>
// En pantalla:
Canis genérico:
Ladrido genérico
Error: sin información
</pre>
      </div>
  </div>
<p>En el siguiente bloque creamos un <code>Chihuahua</code> pero lo asignamos a un objeto de la clase base, después, al llamar a los métodos, vemos que en realidad está llamando a los métodos de la clase base, puesto que no está sobrescribiéndolos con <code>override</code>:</p>
  <div class="wrapper pure-g">
      <div class="pure-u-1 pure-u-md-14-24">
```csharp  
CanisLupusFamiliaris chihuahuaCanis = new Chihuahua();
Console.WriteLine("Chihuahua (Canis):");
chihuahuaCanis.Ladrar();
chihuahuaCanis.MoverOrejas();
```  
      </div>
      <div class="pure-u-1 pure-u-md-10-24">
<pre>
// En pantalla:
Chihuahua (Canis):
Ladrido genérico
Error: sin información
</pre>  
      </div>
  </div>
<p>En el siguiente bloque creamos un <code>Chihuahua</code>, ahora si asignándolo a un objeto de su misma clase, la llamada a los métodos nos da el resultado esperado:</p>
  <div class="wrapper pure-g">
      <div class="pure-u-1 pure-u-md-14-24">
```csharp  
Chihuahua chihuahua = new Chihuahua();
Console.WriteLine("Chihuahua:");
chihuahua.Ladrar();
chihuahua.MoverOrejas();
```  
      </div>
      <div class="pure-u-1 pure-u-md-10-24">
<pre>
// En pantalla:
Chihuahua:
guau, guau
Mueve sus orejitas
</pre> 
      </div>
  </div>  
<p>En el siguiente bloque creamos un <code>GranDanes</code>, asignándolo a un objeto de la clase base, la llamada a los métodos nos da resultados mixtos, <code>Ladrar</code> accede a la implementación de <code>GranDanes</code> porque sobrescribimos el método, pero <code>MoverOrejas</code> accede al de la clase base:</p>
  <div class="wrapper pure-g">
      <div class="pure-u-1 pure-u-md-14-24">
```csharp  
CanisLupusFamiliaris granDanesCanis = new GranDanes();
Console.WriteLine("Gran danes (Canis):");
granDanesCanis.Ladrar();
granDanesCanis.MoverOrejas();
```  
      </div>
      <div class="pure-u-1 pure-u-md-10-24">
<pre>
// En pantalla:
Gran danes (Canis):
WOOF! WOOF!
Error: sin información
</pre>
      </div>
  </div>  
<p>En el siguiente bloque creamos un <code>GranDanes</code>, asignándolo a una clase de su tipo, las llamadas a los métodos se hacen directamente a este tipo:</p>
  <div class="wrapper pure-g">
      <div class="pure-u-1 pure-u-md-14-24">
```csharp  
GranDanes granDanes = new GranDanes();
Console.WriteLine("Gran danes:");
granDanes.Ladrar();
granDanes.MoverOrejas();
```  
      </div>
      <div class="pure-u-1 pure-u-md-10-24">
<pre>
// En pantalla:
Gran danes:
WOOF! WOOF!
Mueve sus orejas gigantezcas
</pre> 
      </div>
  </div>  
<h2>Para terminar</h2>
<p>Como vimos, las palabras <code>virtual</code> y <code>override</code> están completamente relacionadas y nos ayudan a preservar el comportamiento definido en las subclases de un tipo cuando se hace referencia a ellos desde el tipo base. Por otro lado, <code>new</code> no es más que un indicador para que el compilador no piense que estamos cometiendo un error si nombramos un miembro de una clase como uno de los que contenga su clase base.</p>
<p>Por cierto, en este ejemplo solamente utilicé métodos, pero las tres palabras de las que hablé en este post aplican para cualquier miembro: campos, propiedades, métodos, eventos, operadores, indizadores y constructores.</p>



                    </section>
                    <section class="sidebar">
                    <div class="post-menu">
                        <div class="post-menu-title">Sígueme en</div>
                        <div class="common-list">
                            <ul>
                            
                                <li>
                                    <a href="https://github.com/fferegrino">
                                    GitHub<span> <i class="fa fa-github"></i> </span>
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="https://twitter.com/io_exception">
                                    Twitter<span> <i class="fa fa-twitter"></i> </span>
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="https://twitter.com/io_exception">
                                    YouTube<span> <i class="fa fa-youtube"></i> </span>
                                    </a>
                                </li>
                            
                                <li>
                                    <a href="https://tcsg.dev/discord">
                                    Discord<span> <i class="fa fa-discord"></i> </span>
                                    </a>
                                </li>
                            
                            </ul>
                        </div>
                    </div>
                    
                    
                    </section>
                </div>
            </div>
        </div>
        <footer class="site-footer h-card">
   <data class="u-url" href="/"></data>
 
   <div class="wrapper">
     <div class="site-footer-inner">
       <div> </div>
       <div>Powered by <a title="Lockdonw in a simple, blog-aware, static site generator." href="https://github.com/lockdownblog/lockdown">Lockdown</a> &amp; <a title="Yat, yetanother theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
       <!-- <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a></div> -->
     </div>
   </div>
 </footer>
</body>
</html>
